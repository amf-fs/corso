<div class="flex flex-row w-full h-screen">
  <div class="flex flex-col gap-2 w-1/2 p-4">
    <mat-form-field>
      <mat-icon matPrefix>search</mat-icon>
      <input matInput placeholder="what are you looking for?" (input)="onSearchInput($event)"/>
    </mat-form-field>
    <mat-selection-list [multiple]="false" [(ngModel)]="selectedAccounts" (selectionChange)="onAccountListSelectionChange()">
      @for (account of filteredAccounts(); track account.id)
      {
        <mat-list-option [value]="account">
          <mat-icon matListItemIcon>key_vertical</mat-icon>
          <div matListItemTitle>{{ account.name }}</div>
          <div matListItemLine>{{account.username}}</div>
        </mat-list-option>
        <mat-divider></mat-divider>
      }
      @empty {
        <div class="flex flex-col items-center justify-center">
          <mat-icon class="text-6xl !w-16 !h-16">info</mat-icon>
          <span class="text-gray-600 text-lg">
            Hey, I could not find any account, what if we create one at the action panel?
          </span>
        </div>
      }
    </mat-selection-list>
  </div>
  <mat-divider [vertical]="true" class="h-full"></mat-divider>
  <div [formGroup]="accountForm" class="action-panel w-1/2 p-4 flex flex-col gap-4">
    <mat-form-field>
      <mat-icon matPrefix>account_circle</mat-icon>
      <input matInput placeholder="New account" formControlName="accountName"/>
      @if (accountNameControl?.invalid){
        <mat-error>You must identify this account.</mat-error>
      }
    </mat-form-field>
    <mat-form-field>
      <mat-label>username</mat-label>
      <input matInput placeholder="user@example.com" formControlName="username"/>
      @if (usernameControl?.invalid){
        <mat-error>You must enter a username.</mat-error>
      }
    </mat-form-field>
    <mat-form-field>
      <mat-label>password</mat-label>
      <input matInput type="password" formControlName="password"/>
      @if (passwordControl?.invalid){
        <mat-error>You must enter a password.</mat-error>
      }
    </mat-form-field>
    <div class="flex justify-end gap-2">
      <button (click)="onNewAccountButtonClick()" mat-button> 
        <mat-icon>add</mat-icon>
        New account
      </button>
      <button [disabled]="isFormInvalid()" (click)="onSaveButtonClick()" mat-flat-button> 
        Save
      </button>
    </div>
  </div>
</div>
<router-outlet />
